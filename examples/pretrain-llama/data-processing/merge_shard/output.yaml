$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json
code: ../../../../
command: 'bash examples/pretrain-llama/data-processing/merge_shard/remote_merge_shard.sh
  \

  "https://allamllmuksstandard.blob.core.windows.net/vocab-expanded-training-data/processed/ar/translated/en2ar_wikipedia"
  \

  "https://allamllmuksstandard.blob.core.windows.net/vocab-expanded-training-data/processed/merged_shards"
  \

  "sp=racwdli&st=2023-11-26T23:40:14Z&se=2023-11-27T07:40:14Z&spr=https&sv=2022-11-02&sr=c&sig=TPKX%2BtFgVo%2FFGtl0ic%2BOmdi6Txm2Qi191QmOlZclHak%3D"
  \

  "ar_translated_wiki_000.jsonl" \

  "wiki-0-of-10-translated.jsonl" \

  "wiki-1-of-10-translated.jsonl" \

  "wiki-2-of-10-translated.jsonl" \

  "wiki-3-of-10-translated.jsonl" \

  "wiki-4-of-10-translated.jsonl" \

  "wiki-5-of-10-translated.jsonl" \

  "wiki-6-of-10-translated.jsonl" \

  "wiki-7-of-10-translated.jsonl" \

  "wiki-8-of-10-translated.jsonl" \

  "wiki-9-of-10-translated.jsonl"'
compute: azureml:LARGE-CPU
display_name: merge_shard
distribution:
  process_count_per_instance: 1
  type: pytorch
environment: azureml:Megatron-LLaMA:7
environment_variables:
  CUDA_DEVICE_MAX_CONNECTIONS: '1'
  HYDRA_FULL_ERROR: '1'
  NCCL_DEBUG: WARN
  NCCL_IB_PCI_RELAXED_ORDERING: '2'
  NCCL_IB_TIMEOUT: '22'
  UCX_IB_PCI_RELAXED_ORDERING: auto
experiment_name: tokenize
resources:
  instance_count: 1
  shm_size: 100g
services:
  my_jupyterlab:
    nodes: all
    type: jupyter_lab
