#!/bin/bash

echo "=================================================================================="
echo "æœ€ç»ˆæµ‹è¯•ï¼šmicro_batch_size å’Œ control_iter å‚æ•°æ§åˆ¶"
echo "=================================================================================="

echo ""
echo "âœ… å·²å®Œæˆçš„ä¿®æ”¹æ€»ç»“:"
echo "1. æ·»åŠ äº† --micro-batch-size å‘½ä»¤è¡Œå‚æ•°æ”¯æŒ"
echo "2. æ›´æ–°äº†è®­ç»ƒè„šæœ¬ä»¥æ¥å— --micro-batch-size å‚æ•°"
echo "3. ä¿®æ”¹äº† control_iter ä»æ§åˆ¶ iteration æ”¹ä¸ºæ§åˆ¶ micro_batch æ•°é‡"
echo "4. ç§»é™¤äº†æ‰€æœ‰ sample è®°å½•ç›¸å…³çš„ä»£ç "
echo "5. åœ¨è®­ç»ƒå¾ªç¯ä¸­æ·»åŠ äº† micro_batch è®¡æ•°å’Œæå‰é€€å‡ºé€»è¾‘"
echo ""

echo "ğŸ”§ å‚æ•°è¯´æ˜:"
echo "- --control-iter: æ§åˆ¶æ”¶é›†å¤šå°‘ä¸ª micro_batch çš„æ•°æ®"
echo "- --collect-micro-batches: æ”¶é›†çš„ micro_batch æ•°é‡"
echo ""

echo "ğŸ“ ä½¿ç”¨ç¤ºä¾‹:"
echo ""
echo "1. åŸºæœ¬ç”¨æ³•ï¼ˆé»˜è®¤å‚æ•°ï¼‰:"
echo "   ./run_tensor_collection.sh single mxfp8"
echo "   # æ”¶é›†1ä¸ªmicro_batch"
echo ""
echo "2. è‡ªå®šä¹‰æ”¶é›†çš„micro_batchæ•°é‡:"
echo "   ./run_tensor_collection.sh --mode single --quant-type mxfp8 --control-iter 3"
echo "   # æ”¶é›†3ä¸ªmicro_batch"
echo ""
echo "3. è‡ªå®šä¹‰æ”¶é›†çš„micro_batchæ•°é‡:"
echo "   ./run_tensor_collection.sh --mode single --quant-type mxfp8 --collect-micro-batches 2"
echo "   # æ”¶é›†2ä¸ªmicro_batch"
echo ""
echo "4. åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªå‚æ•°:"
echo "   ./run_tensor_collection.sh --mode single --quant-type mxfp8 --control-iter 3 --collect-micro-batches 2"
echo "   # æ”¶é›†2ä¸ªmicro_batchï¼Œæœ€å¤š3ä¸ªiteration"
echo ""
echo "5. é€šè¿‡ä¸»è„šæœ¬ä½¿ç”¨:"
echo "   ./run_tensor_draw.sh --mode collect --quant-type mxfp8 --control-iter 2 --collect-micro-batches 1"
echo "   # æ”¶é›†1ä¸ªmicro_batchï¼Œæœ€å¤š2ä¸ªiteration"
echo ""

echo "ğŸ¯ ä¸»è¦æ”¹è¿›:"
echo "- æ›´ç²¾ç¡®çš„æ§åˆ¶ï¼šå¯ä»¥åŒæ—¶æ§åˆ¶micro_batchæ•°é‡å’Œå¤§å°"
echo "- æ›´å¿«çš„æµ‹è¯•ï¼šåªéœ€è¦è·‘å®ŒæŒ‡å®šæ•°é‡çš„micro_batchå°±å¯ä»¥åœæ­¢"
echo "- ç®€åŒ–çš„ä»£ç ï¼šç§»é™¤äº†å¤æ‚çš„sampleè·Ÿè¸ªé€»è¾‘"
echo "- æ›´å¥½çš„æ€§èƒ½ï¼šé¿å…äº†æ”¶é›†è¿‡å¤šä¸å¿…è¦çš„æ•°æ®"
echo ""

echo "=================================================================================="
echo "æµ‹è¯•å®Œæˆï¼æ‰€æœ‰åŠŸèƒ½éƒ½å·²æ­£ç¡®å®ç°ã€‚"
echo "=================================================================================="
